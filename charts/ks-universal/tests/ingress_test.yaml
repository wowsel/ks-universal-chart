suite: Ingress tests
templates:
  - ingress.yaml

tests:
  - it: should handle ingress with multiple paths
    values:
      - ./values/ingress-multi-path.yaml
    set:
      ingresses:
        frontend:
          annotations:
            kubernetes.io/ingress.class: nginx
          hosts:
            - host: example.com
              paths:
                - path: /
                  pathType: Prefix
                  service: frontend-svc
                  port: 80
                - path: /api
                  pathType: Prefix
                  service: api-svc
                  port: 8080
    asserts:
      - template: ingress.yaml
        equal:
          path: kind
          value: Ingress
      - template: ingress.yaml
        equal:
          path: metadata.name
          value: frontend 