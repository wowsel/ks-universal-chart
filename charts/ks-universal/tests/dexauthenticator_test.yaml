suite: DexAuthenticator tests
templates:
  - dexauthenticator.yaml
tests:
  - it: should create standalone DexAuthenticator
    set:
      dexAuthenticators:
        my-auth:
          applicationDomain: standalone.example.com
          sendAuthorizationHeader: true
          applicationIngressCertificateSecretName: ingress-tls
          applicationIngressClassName: nginx
    asserts:
      - matchRegex:
          path: kind
          pattern: DexAuthenticator
      - equal:
          path: apiVersion
          value: deckhouse.io/v1 